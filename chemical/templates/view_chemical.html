{% extends "layout_statistic.html" %}
{% block title %}Danh saÃÅch hoÃÅa ch√¢ÃÅt ƒëaÃÉ nh√¢Ã£n{% endblock %}

{% block content %}
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border: 1px solid #999;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f0f0f0;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        td.left {
            text-align: left;
            padding-left: 10px;
        }

        a.button, button.button {
            padding: 4px 8px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            text-decoration: none;
            cursor: pointer;
        }

        button.button.delete {
            background-color: #e74c3c;
        }

        a.button:hover, button.button:hover {
            opacity: 0.9;
        }
    </style>

    <h2 style="text-align: center;">üìã DANH SAÃÅCH HOÃÅA CH√ÇÃÅT ƒêAÃÉ NH√ÇÃ£P</h2>

    {% set col_headers = {
        'id': 'STT',
        'chemical_sap_name': 'T√™n ho√° ch·∫•t (SAP)',
        'chemical_name': 'T√™n ho√° ch·∫•t (LAB)',
        'unit': 'ƒê∆°n v·ªã',
        'quantity': 'S·ªë l∆∞·ª£ng',
        'supplier': 'Nh√† cung c·∫•p',
        'import_date': 'Ng√†y nh·∫≠p',
        'sap_code': 'M√£ SAP',
        'lot_number': 'S·ªë Lot',
        'storage_condition': 'ƒêK b·∫£o qu·∫£n',
        'expiration_date': 'Ng√†y h·∫øt h·∫°n',
        'imported_by': 'Ng∆∞·ªùi nh·∫≠p',
        'batch_code': 'M√£ ƒë·ª£t nh·∫≠p'
    } %}

    <table>
        <thead>
            <tr>
                <th>STT</th>
                {% for col in col_names[1:] %}
                    <th>{{ col_headers[col] if col in col_headers else col }}</th>
                {% endfor %}
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody>
            {% for row in rows %}
                <tr>
                    <td>{{ loop.index }}</td>
                    {% for i in range(1, row|length) %}
                        {% set col_name = col_names[i] %}
                        <td class="{% if col_name in ['chemical_sap_name', 'chemical_name', 'supplier'] %}left{% endif %}">
                            {{ row[i] }}
                        </td>
                    {% endfor %}
                    <td>
                        <a href="/edit_chemical/{{ row[0] }}" class="button">‚úèÔ∏è S·ª≠a</a>
                        <form method="POST" action="/delete_chemical/{{ row[0] }}" style="display:inline;" onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën xo√° d√≤ng n√†y?');">
                            <button type="submit" class="button delete">üóëÔ∏è Xo√°</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <br>
    <a href="/import_chemical">‚¨Ö Quay l·∫°i nh·∫≠p h√≥a ch·∫•t</a>
{% endblock %}
