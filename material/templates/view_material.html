{% extends "layout_import.html" %}
{% block title %}Danh saÃÅch v√¢Ã£t t∆∞ ƒëaÃÉ nh√¢Ã£n{% endblock %}

{% block content %}
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border: 1px solid #999;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f0f0f0;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        td.left {
            text-align: left;
            padding-left: 10px;
        }

        a.button {
            padding: 4px 8px;
            background-color: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 4px;
        }

        a.button:hover {
            background-color: #45a049;
        }
    </style>

    <h2 style="text-align: center;">üìã DANH SAÃÅCH V√ÇÃ£T T∆Ø ƒêAÃÉ NH√ÇÃ£P</h2>

    {% set col_headers = {
        'id': 'STT',
        'material_sap_name': 'T√™n v·∫≠t t∆∞ (SAP)',
        'material_name': 'T√™n v·∫≠t t∆∞ (LAB)',
        'unit': 'ƒê∆°n v·ªã',
        'quantity': 'S·ªë l∆∞·ª£ng',
        'supplier': 'Nh√† cung c·∫•p',
        'import_date': 'Ng√†y nh·∫≠p',
        'sap_code': 'M√£ SAP',
        'imported_by': 'Ng∆∞·ªùi nh·∫≠p'
    } %}

    <table>
        <thead>
            <tr>
                <th>STT</th>  {# Th√™m c·ªôt STT c·ªë ƒë·ªãnh #}
                {% for col in col_names[1:] %}
                    <th>{{ col_headers[col] if col in col_headers else col }}</th>
                {% endfor %}
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody>
            {% for row in rows %}
                <tr>
                    <td>{{ loop.index }}</td>  {# S·ª≠ d·ª•ng ch·ªâ s·ªë v√≤ng l·∫∑p #}
                    {% for i in range(1, row|length) %}
                        {% set col_name = col_names[i] %}
                        <td class="{% if col_name in ['material_sap_name', 'material_name', 'supplier'] %}left{% endif %}">
                            {{ row[i] }}
                        </td>
                    {% endfor %}
                    <td>
                        <a href="/edit_material/{{ row[0] }}" class="button">‚úèÔ∏è S·ª≠a</a>
                        <form method="POST" action="/delete_material/{{ row[0] }}" style="display:inline;" onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën xo√° d√≤ng n√†y kh√¥ng?');">
                            <button type="submit" class="button" style="background-color:#e74c3c;">üóëÔ∏è Xo√°</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <br>
    <a href="/import_material">‚¨Ö Quay l·∫°i nh·∫≠p v·∫≠t t∆∞</a>
{% endblock %}
